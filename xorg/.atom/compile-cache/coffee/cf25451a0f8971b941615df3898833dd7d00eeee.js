(function() {
  var EditLine;

  EditLine = require("../../lib/commands/edit-line");

  describe("EditLine", function() {
    var editLine, editor, event, ref;
    ref = [], editor = ref[0], editLine = ref[1], event = ref[2];
    beforeEach(function() {
      waitsForPromise(function() {
        return atom.workspace.open("empty.markdown");
      });
      return runs(function() {
        editor = atom.workspace.getActiveTextEditor();
        event = {
          abortKeyBinding: function() {
            return {};
          }
        };
        return spyOn(event, "abortKeyBinding");
      });
    });
    describe("insertNewLine", function() {
      beforeEach(function() {
        return editLine = new EditLine("insert-new-line");
      });
      it("does not affect normal new line", function() {
        editor.setText("this is normal line");
        editor.setCursorBufferPosition([0, 4]);
        editLine.trigger(event);
        return expect(event.abortKeyBinding).toHaveBeenCalled();
      });
      it("continue if config inlineNewLineContinuation enabled", function() {
        atom.config.set("markdown-writer.inlineNewLineContinuation", true);
        editor.setText("- inline line");
        editor.setCursorBufferPosition([0, 8]);
        editLine.trigger();
        return expect(editor.getText()).toBe("- inline\n-  line");
      });
      it("continue after unordered list line", function() {
        editor.setText("- line");
        editor.setCursorBufferPosition([0, 6]);
        editLine.trigger();
        return expect(editor.getText()).toBe(["- line", "- "].join("\n"));
      });
      it("continue after ordered task list line", function() {
        editor.setText("1. [ ] Epic Tasks\n  1. [X] Sub-task A");
        editor.setCursorBufferPosition([1, 19]);
        editLine.trigger();
        return expect(editor.getText()).toBe(["1. [ ] Epic Tasks", "  1. [X] Sub-task A", "  2. [ ] "].join("\n"));
      });
      it("continue after alpha ordered task list line", function() {
        editor.setText("1. [ ] Epic Tasks\n  y. [X] Sub-task A");
        editor.setCursorBufferPosition([1, 19]);
        editLine.trigger();
        return expect(editor.getText()).toBe(["1. [ ] Epic Tasks", "  y. [X] Sub-task A", "  z. [ ] "].join("\n"));
      });
      it("continue after blockquote line", function() {
        editor.setText("> Your time is limited, so don’t waste it living someone else’s life.");
        editor.setCursorBufferPosition([0, 69]);
        editLine.trigger();
        return expect(editor.getText()).toBe(["> Your time is limited, so don’t waste it living someone else’s life.", "> "].join("\n"));
      });
      it("not continue after empty unordered task list line", function() {
        editor.setText("- [ ]");
        editor.setCursorBufferPosition([0, 5]);
        editLine.trigger();
        return expect(editor.getText()).toBe(["", ""].join("\n"));
      });
      it("not continue after empty ordered list line", function() {
        editor.setText(["1. [ ] parent", "  - child", "  - "].join("\n"));
        editor.setCursorBufferPosition([2, 4]);
        editLine.trigger();
        return expect(editor.getText()).toBe(["1. [ ] parent", "  - child", "2. [ ] "].join("\n"));
      });
      return it("not continue after empty ordered paragraph", function() {
        editor.setText(["1. parent", "  - child has a paragraph", "", "    paragraph one", "", "    paragraph two", "", "  - "].join("\n"));
        editor.setCursorBufferPosition([7, 4]);
        editLine.trigger();
        return expect(editor.getText()).toBe(["1. parent", "  - child has a paragraph", "", "    paragraph one", "", "    paragraph two", "", "2. "].join("\n"));
      });
    });
    return describe("indentListLine", function() {
      beforeEach(function() {
        return editLine = new EditLine("indent-list-line");
      });
      it("indent line if it is at head of line", function() {
        editor.setText("  normal line");
        editor.setCursorBufferPosition([0, 1]);
        editLine.trigger();
        return expect(editor.getText()).toBe("    normal line");
      });
      it("indent line if it is a list", function() {
        editor.setText("- list");
        editor.setCursorBufferPosition([0, 5]);
        editLine.trigger();
        return expect(editor.getText()).toBe("  - list");
      });
      return it("insert space if it is text", function() {
        editor.setText("texttext");
        editor.setCursorBufferPosition([0, 4]);
        editLine.trigger(event);
        return expect(event.abortKeyBinding).toHaveBeenCalled();
      });
    });
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL2hvbWUvcmlkZGxlLy5hdG9tL3BhY2thZ2VzL21hcmtkb3duLXdyaXRlci9zcGVjL2NvbW1hbmRzL2VkaXQtbGluZS1zcGVjLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBLE1BQUE7O0VBQUEsUUFBQSxHQUFXLE9BQUEsQ0FBUSw4QkFBUjs7RUFFWCxRQUFBLENBQVMsVUFBVCxFQUFxQixTQUFBO0FBQ25CLFFBQUE7SUFBQSxNQUE0QixFQUE1QixFQUFDLGVBQUQsRUFBUyxpQkFBVCxFQUFtQjtJQUVuQixVQUFBLENBQVcsU0FBQTtNQUNULGVBQUEsQ0FBZ0IsU0FBQTtlQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBZixDQUFvQixnQkFBcEI7TUFBSCxDQUFoQjthQUNBLElBQUEsQ0FBSyxTQUFBO1FBQ0gsTUFBQSxHQUFTLElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQWYsQ0FBQTtRQUVULEtBQUEsR0FBUTtVQUFFLGVBQUEsRUFBaUIsU0FBQTttQkFBRztVQUFILENBQW5COztlQUNSLEtBQUEsQ0FBTSxLQUFOLEVBQWEsaUJBQWI7TUFKRyxDQUFMO0lBRlMsQ0FBWDtJQVFBLFFBQUEsQ0FBUyxlQUFULEVBQTBCLFNBQUE7TUFDeEIsVUFBQSxDQUFXLFNBQUE7ZUFBRyxRQUFBLEdBQWUsSUFBQSxRQUFBLENBQVMsaUJBQVQ7TUFBbEIsQ0FBWDtNQUVBLEVBQUEsQ0FBRyxpQ0FBSCxFQUFzQyxTQUFBO1FBQ3BDLE1BQU0sQ0FBQyxPQUFQLENBQWUscUJBQWY7UUFDQSxNQUFNLENBQUMsdUJBQVAsQ0FBK0IsQ0FBQyxDQUFELEVBQUksQ0FBSixDQUEvQjtRQUVBLFFBQVEsQ0FBQyxPQUFULENBQWlCLEtBQWpCO2VBQ0EsTUFBQSxDQUFPLEtBQUssQ0FBQyxlQUFiLENBQTZCLENBQUMsZ0JBQTlCLENBQUE7TUFMb0MsQ0FBdEM7TUFPQSxFQUFBLENBQUcsc0RBQUgsRUFBMkQsU0FB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QTtlQUNBLE1BQUEsQ0FBTyxNQUFNLENBQUMsT0FBUCxDQUFBLENBQVAsQ0FBd0IsQ0FBQyxJQUF6QixDQUE4QixpQkFBOUI7TUFMeUMsQ0FBM0M7TUFPQSxFQUFBLENBQUcsNkJBQUgsRUFBa0MsU0FBQTtRQUNoQyxNQUFNLENBQUMsT0FBUCxDQUFlLFFBQWY7UUFDQSxNQUFNLENBQUMsdUJBQVAsQ0FBK0IsQ0FBQyxDQUFELEVBQUksQ0FBSixDQUEvQjtRQUVBLFFBQVEsQ0FBQyxPQUFULENBQUE7ZUFDQSxNQUFBLENBQU8sTUFBTSxDQUFDLE9BQVAsQ0FBQSxDQUFQLENBQXdCLENBQUMsSUFBekIsQ0FBOEIsVUFBOUI7TUFMZ0MsQ0FBbEM7YUFPQSxFQUFBLENBQUcsNEJBQUgsRUFBaUMsU0FBQTtRQUMvQixNQUFNLENBQUMsT0FBUCxDQUFlLFVBQWY7UUFDQSxNQUFNLENBQUMsdUJBQVAsQ0FBK0IsQ0FBQyxDQUFELEVBQUksQ0FBSixDQUEvQjtRQUVBLFFBQVEsQ0FBQyxPQUFULENBQWlCLEtBQWpCO2VBQ0EsTUFBQSxDQUFPLEtBQUssQ0FBQyxlQUFiLENBQTZCLENBQUMsZ0JBQTlCLENBQUE7TUFMK0IsQ0FBakM7SUFqQnlCLENBQTNCO0VBcEltQixDQUFyQjtBQUZBIiwic291cmNlc0NvbnRlbnQiOlsiRWRpdExpbmUgPSByZXF1aXJlIFwiLi4vLi4vbGliL2NvbW1hbmRzL2VkaXQtbGluZVwiXG5cbmRlc2NyaWJlIFwiRWRpdExpbmVcIiwgLT5cbiAgW2VkaXRvciwgZWRpdExpbmUsIGV2ZW50XSA9IFtdXG5cbiAgYmVmb3JlRWFjaCAtPlxuICAgIHdhaXRzRm9yUHJvbWlzZSAtPiBhdG9tLndvcmtzcGFjZS5vcGVuKFwiZW1wdHkubWFya2Rvd25cIilcbiAgICBydW5zIC0+XG4gICAgICBlZGl0b3IgPSBhdG9tLndvcmtzcGFjZS5nZXRBY3RpdmVUZXh0RWRpdG9yKClcblxuICAgICAgZXZlbnQgPSB7IGFib3J0S2V5QmluZGluZzogLT4ge30gfVxuICAgICAgc3B5T24oZXZlbnQsIFwiYWJvcnRLZXlCaW5kaW5nXCIpXG5cbiAgZGVzY3JpYmUgXCJpbnNlcnROZXdMaW5lXCIsIC0+XG4gICAgYmVmb3JlRWFjaCAtPiBlZGl0TGluZSA9IG5ldyBFZGl0TGluZShcImluc2VydC1uZXctbGluZVwiKVxuXG4gICAgaXQgXCJkb2VzIG5vdCBhZmZlY3Qgbm9ybWFsIG5ldyBsaW5lXCIsIC0+XG4gICAgICBlZGl0b3Iuc2V0VGV4dCBcInRoaXMgaXMgbm9ybWFsIGxpbmVcIlxuICAgICAgZWRpdG9yLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKFswLCA0XSlcblxuICAgICAgZWRpdExpbmUudHJpZ2dlcihldmVudClcbiAgICAgIGV4cGVjdChldmVudC5hYm9ydEtleUJpbmRpbmcpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuXG4gICAgaXQgXCJjb250aW51ZSBpZiBjb25maWcgaW5saW5lTmV3TGluZUNvbnRpbnVhdGlvbiBlbmFibGVkXCIsIC0+XG4gICAgICBhdG9tLmNvbmZpZy5zZXQoXCJtYXJrZG93bi13cml0ZXIuaW5saW5lTmV3TGluZUNvbnRpbnVhdGlvblwiLCB0cnVlKVxuXG4gICAgICBlZGl0b3Iuc2V0VGV4dCBcIi0gaW5saW5lIGxpbmVcIlxuICAgICAgZWRpdG9yLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKFswLCA4XSlcblxuICAgICAgZWRpdExpbmUudHJpZ2dlcigpXG4gICAgICBleHBlY3QoZWRpdG9yLmdldFRleHQoKSkudG9CZSBcIlwiXCJcbiAgICAgIC0gaW5saW5lXG4gICAgICAtICBsaW5lXG4gICAgICBcIlwiXCJcblxuICAgIGl0IFwiY29udGludWUgYWZ0ZXIgdW5vcmRlcmVkIGxpc3QgbGluZVwiLCAtPlxuICAgICAgZWRpdG9yLnNldFRleHQgXCItIGxpbmVcIlxuICAgICAgZWRpdG9yLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKFswLCA2XSlcblxuICAgICAgZWRpdExpbmUudHJpZ2dlcigpXG4gICAgICBleHBlY3QoZWRpdG9yLmdldFRleHQoKSkudG9CZSBbXG4gICAgICAgIFwiLSBsaW5lXCJcbiAgICAgICAgXCItIFwiICMgbGFzdCBpdGVtIHdpdGggdHJhaWxpbmcgd2hpdGVzcGFjZVxuICAgICAgXS5qb2luKFwiXFxuXCIpXG5cbiAgICBpdCBcImNvbnRpbnVlIGFmdGVyIG9yZGVyZWQgdGFzayBsaXN0IGxpbmVcIiwgLT5cbiAgICAgIGVkaXRvci5zZXRUZXh0IFwiXCJcIlxuICAgICAgMS4gWyBdIEVwaWMgVGFza3NcbiAgICAgICAgMS4gW1hdIFN1Yi10YXNrIEFcbiAgICAgIFwiXCJcIlxuICAgICAgZWRpdG9yLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKFsxLCAxOV0pXG5cbiAgICAgIGVkaXRMaW5lLnRyaWdnZXIoKVxuICAgICAgZXhwZWN0KGVkaXRvci5nZXRUZXh0KCkpLnRvQmUgW1xuICAgICAgICBcIjEuIFsgXSBFcGljIFRhc2tzXCJcbiAgICAgICAgXCIgIDEuIFtYXSBTdWItdGFzayBBXCJcbiAgICAgICAgXCIgIDIuIFsgXSBcIiAjIGxhc3QgaXRlbSB3aXRoIHRyYWlsaW5nIHdoaXRlc3BhY2VcbiAgICAgIF0uam9pbihcIlxcblwiKVxuXG4gICAgaXQgXCJjb250aW51ZSBhZnRlciBhbHBoYSBvcmRlcmVkIHRhc2sgbGlzdCBsaW5lXCIsIC0+XG4gICAgICBlZGl0b3Iuc2V0VGV4dCBcIlwiXCJcbiAgICAgIDEuIFsgXSBFcGljIFRhc2tzXG4gICAgICAgIHkuIFtYXSBTdWItdGFzayBBXG4gICAgICBcIlwiXCJcbiAgICAgIGVkaXRvci5zZXRDdXJzb3JCdWZmZXJQb3NpdGlvbihbMSwgMTldKVxuXG4gICAgICBlZGl0TGluZS50cmlnZ2VyKClcbiAgICAgIGV4cGVjdChlZGl0b3IuZ2V0VGV4dCgpKS50b0JlIFtcbiAgICAgICAgXCIxLiBbIF0gRXBpYyBUYXNrc1wiXG4gICAgICAgIFwiICB5LiBbWF0gU3ViLXRhc2sgQVwiXG4gICAgICAgIFwiICB6LiBbIF0gXCIgIyBsYXN0IGl0ZW0gd2l0aCB0cmFpbGluZyB3aGl0ZXNwYWNlXG4gICAgICBdLmpvaW4oXCJcXG5cIilcblxuICAgIGl0IFwiY29udGludWUgYWZ0ZXIgYmxvY2txdW90ZSBsaW5lXCIsIC0+XG4gICAgICBlZGl0b3Iuc2V0VGV4dCBcIlwiXCJcbiAgICAgID4gWW91ciB0aW1lIGlzIGxpbWl0ZWQsIHNvIGRvbuKAmXQgd2FzdGUgaXQgbGl2aW5nIHNvbWVvbmUgZWxzZeKAmXMgbGlmZS5cbiAgICAgIFwiXCJcIlxuICAgICAgZWRpdG9yLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKFswLCA2OV0pXG5cbiAgICAgIGVkaXRMaW5lLnRyaWdnZXIoKVxuICAgICAgZXhwZWN0KGVkaXRvci5nZXRUZXh0KCkpLnRvQmUgW1xuICAgICAgICBcIj4gWW91ciB0aW1lIGlzIGxpbWl0ZWQsIHNvIGRvbuKAmXQgd2FzdGUgaXQgbGl2aW5nIHNvbWVvbmUgZWxzZeKAmXMgbGlmZS5cIlxuICAgICAgICBcIj4gXCIgIyBsYXN0IGl0ZW0gd2l0aCB0cmFpbGluZyB3aGl0ZXNwYWNlXG4gICAgICBdLmpvaW4oXCJcXG5cIilcblxuICAgIGl0IFwibm90IGNvbnRpbnVlIGFmdGVyIGVtcHR5IHVub3JkZXJlZCB0YXNrIGxpc3QgbGluZVwiLCAtPlxuICAgICAgZWRpdG9yLnNldFRleHQgXCJcIlwiXG4gICAgICAtIFsgXVxuICAgICAgXCJcIlwiXG4gICAgICBlZGl0b3Iuc2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oWzAsIDVdKVxuXG4gICAgICBlZGl0TGluZS50cmlnZ2VyKClcbiAgICAgIGV4cGVjdChlZGl0b3IuZ2V0VGV4dCgpKS50b0JlIFtcIlwiLCBcIlwiXS5qb2luKFwiXFxuXCIpXG5cbiAgICBpdCBcIm5vdCBjb250aW51ZSBhZnRlciBlbXB0eSBvcmRlcmVkIGxpc3QgbGluZVwiLCAtPlxuICAgICAgZWRpdG9yLnNldFRleHQgW1xuICAgICAgICBcIjEuIFsgXSBwYXJlbnRcIlxuICAgICAgICBcIiAgLSBjaGlsZFwiXG4gICAgICAgIFwiICAtIFwiICMgbGFzdCBpdGVtIHdpdGggdHJhaWxpbmcgd2hpdGVzcGFjZVxuICAgICAgXS5qb2luKFwiXFxuXCIpXG4gICAgICBlZGl0b3Iuc2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oWzIsIDRdKVxuXG4gICAgICBlZGl0TGluZS50cmlnZ2VyKClcbiAgICAgIGV4cGVjdChlZGl0b3IuZ2V0VGV4dCgpKS50b0JlIFtcbiAgICAgICAgXCIxLiBbIF0gcGFyZW50XCJcbiAgICAgICAgXCIgIC0gY2hpbGRcIlxuICAgICAgICBcIjIuIFsgXSBcIiAjIGxhc3QgaXRlbSB3aXRoIHRyYWlsaW5nIHdoaXRlc3BhY2VcbiAgICAgIF0uam9pbihcIlxcblwiKVxuXG4gICAgaXQgXCJub3QgY29udGludWUgYWZ0ZXIgZW1wdHkgb3JkZXJlZCBwYXJhZ3JhcGhcIiwgLT5cbiAgICAgIGVkaXRvci5zZXRUZXh0IFtcbiAgICAgICAgXCIxLiBwYXJlbnRcIlxuICAgICAgICBcIiAgLSBjaGlsZCBoYXMgYSBwYXJhZ3JhcGhcIlxuICAgICAgICBcIlwiXG4gICAgICAgIFwiICAgIHBhcmFncmFwaCBvbmVcIlxuICAgICAgICBcIlwiXG4gICAgICAgIFwiICAgIHBhcmFncmFwaCB0d29cIlxuICAgICAgICBcIlwiXG4gICAgICAgIFwiICAtIFwiICMgbGFzdCBpdGVtIHdpdGggdHJhaWxpbmcgd2hpdGVzcGFjZVxuICAgICAgXS5qb2luKFwiXFxuXCIpXG4gICAgICBlZGl0b3Iuc2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oWzcsIDRdKVxuXG4gICAgICBlZGl0TGluZS50cmlnZ2VyKClcbiAgICAgIGV4cGVjdChlZGl0b3IuZ2V0VGV4dCgpKS50b0JlIFtcbiAgICAgICAgXCIxLiBwYXJlbnRcIlxuICAgICAgICBcIiAgLSBjaGlsZCBoYXMgYSBwYXJhZ3JhcGhcIlxuICAgICAgICBcIlwiXG4gICAgICAgIFwiICAgIHBhcmFncmFwaCBvbmVcIlxuICAgICAgICBcIlwiXG4gICAgICAgIFwiICAgIHBhcmFncmFwaCB0d29cIlxuICAgICAgICBcIlwiXG4gICAgICAgIFwiMi4gXCIgIyBsYXN0IGl0ZW0gd2l0aCB0cmFpbGluZyB3aGl0ZXNwYWNlXG4gICAgICBdLmpvaW4oXCJcXG5cIilcblxuICBkZXNjcmliZSBcImluZGVudExpc3RMaW5lXCIsIC0+XG4gICAgYmVmb3JlRWFjaCAtPiBlZGl0TGluZSA9IG5ldyBFZGl0TGluZShcImluZGVudC1saXN0LWxpbmVcIilcblxuICAgIGl0IFwiaW5kZW50IGxpbmUgaWYgaXQgaXMgYXQgaGVhZCBvZiBsaW5lXCIsIC0+XG4gICAgICBlZGl0b3Iuc2V0VGV4dCBcIiAgbm9ybWFsIGxpbmVcIlxuICAgICAgZWRpdG9yLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKFswLCAxXSlcblxuICAgICAgZWRpdExpbmUudHJpZ2dlcigpXG4gICAgICBleHBlY3QoZWRpdG9yLmdldFRleHQoKSkudG9CZShcIiAgICBub3JtYWwgbGluZVwiKVxuXG4gICAgaXQgXCJpbmRlbnQgbGluZSBpZiBpdCBpcyBhIGxpc3RcIiwgLT5cbiAgICAgIGVkaXRvci5zZXRUZXh0IFwiLSBsaXN0XCJcbiAgICAgIGVkaXRvci5zZXRDdXJzb3JCdWZmZXJQb3NpdGlvbihbMCwgNV0pXG5cbiAgICAgIGVkaXRMaW5lLnRyaWdnZXIoKVxuICAgICAgZXhwZWN0KGVkaXRvci5nZXRUZXh0KCkpLnRvQmUoXCIgIC0gbGlzdFwiKVxuXG4gICAgaXQgXCJpbnNlcnQgc3BhY2UgaWYgaXQgaXMgdGV4dFwiLCAtPlxuICAgICAgZWRpdG9yLnNldFRleHQgXCJ0ZXh0dGV4dFwiXG4gICAgICBlZGl0b3Iuc2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oWzAsIDRdKVxuXG4gICAgICBlZGl0TGluZS50cmlnZ2VyKGV2ZW50KVxuICAgICAgZXhwZWN0KGV2ZW50LmFib3J0S2V5QmluZGluZykudG9IYXZlQmVlbkNhbGxlZCgpXG4iXX0=
