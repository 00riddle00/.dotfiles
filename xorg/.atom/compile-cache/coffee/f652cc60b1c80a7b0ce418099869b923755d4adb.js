(function() {
  var JumpTo;

  JumpTo = require("../../lib/commands/jump-to");

  describe("JumpTo", function() {
    var editor;
    editor = null;
    beforeEach(function() {
      waitsForPromise(function() {
        return atom.workspace.open("empty.markdown");
      });
      return runs(function() {
        return editor = atom.workspace.getActiveTextEditor();
      });
    });
    describe(".trigger", function() {
      it("triggers correct command", function() {
        var jumpTo;
        jumpTo = new JumpTo("next-heading");
        spyOn(jumpTo, "nextHeading");
        jumpTo.trigger({
          abortKeyBinding: function() {
            return {};
          }
        });
        return expect(jumpTo.nextHeading).toHaveBeenCalled();
      });
      return it("jumps to correct position", function() {
        var jumpTo;
        jumpTo = new JumpTo("previous-heading");
        jumpTo.previousHeading = function() {
          return [5, 5];
        };
        spyOn(jumpTo.editor, "setCursorBufferPosition");
        jumpTo.trigger();
        return expect(jumpTo.editor.setCursorBufferPosition).toHaveBeenCalledWith([5, 5]);
      });
    });
    describe(".previousHeading", function() {
      var text;
      text = "# Title\n\ncontent content\n\n## Subtitle\n\ncontent content";
      it("finds nothing if no headings", function() {
        var jumpTo;
        jumpTo = new JumpTo();
        return expect(jumpTo.previousHeading()).toBe(false);
      });
      it("finds nothing if no previous heading", function() {
        var jumpTo;
        editor.setText(text);
        editor.setCursorBufferPosition([0, 1]);
        jumpTo = new JumpTo();
        return expect(jumpTo.previousHeading()).toEqual(false);
      });
      it("finds previous subtitle", function() {
        var jumpTo;
        editor.setText(text);
        editor.setCursorBufferPosition([6, 6]);
        jumpTo = new JumpTo();
        return expect(jumpTo.previousHeading()).toEqual({
          row: 4,
          column: 0
        });
      });
      return it("finds previous title", function() {
        var jumpTo;
        editor.setText(text);
        editor.setCursorBufferPosition([4, 1]);
        jumpTo = new JumpTo();
        return expect(jumpTo.previousHeading()).toEqual({
          row: 0,
          column: 0
        });
      });
    });
    describe(".nextHeading", function() {
      var text;
      text = "# Title\n\ncontent content\n\n## Subtitle\n\ncontent content";
      it("finds nothing if no headings", function() {
        var jumpTo;
        jumpTo = new JumpTo();
        return expect(jumpTo.nextHeading()).toBe(false);
      });
      it("finds next subtitle", function() {
        var jumpTo;
        editor.setText(text);
        editor.setCursorBufferPosition([3, 6]);
        jumpTo = new JumpTo();
        return expect(jumpTo.nextHeading()).toEqual({
          row: 4,
          column: 0
        });
      });
      return it("finds top title", function() {
        var jumpTo;
        editor.setText(text);
        editor.setCursorBufferPosition([6, 5]);
        jumpTo = new JumpTo();
        return expect(jumpTo.nextHeading()).toEqual({
          row: 0,
          column: 0
        });
      });
    });
    describe(".referenceDefinition", function() {
      var text;
      text = "empty line with no link\nempty line with orphan [link][link]\n\nlink to [zhuochun/md-writer][cfc27b01] should work\nlink to [Markdown-Writer for Atom][] should work as well\n\n  [cfc27b01]: https://github.com/zhuochun/md-writer \"Markdown-Writer for Atom\"\n  [Markdown-Writer for Atom]: https://github.com/zhuochun/md-writer \"Markdown-Writer for Atom\"\n  [nofound]: https://example.com\n\nfootnotes[^fn] is a kind of special link\n\n  [^fn]: footnote definition";
      it("finds nothing if no word under cursor", function() {
        var jumpTo;
        jumpTo = new JumpTo();
        return expect(jumpTo.referenceDefinition()).toBe(false);
      });
      it("finds nothing if no link found", function() {
        var jumpTo;
        editor.setText(text);
        editor.setCursorBufferPosition([0, 2]);
        jumpTo = new JumpTo();
        return expect(jumpTo.referenceDefinition()).toBe(false);
      });
      describe("links", function() {
        beforeEach(function() {
          return editor.setText(text);
        });
        it("finds nothing if no link definition", function() {
          var jumpTo;
          editor.setCursorBufferPosition([1, 2]);
          jumpTo = new JumpTo();
          return expect(jumpTo.referenceDefinition()).toBe(false);
        });
        it("finds nothing if no link reference", function() {
          var jumpTo;
          editor.setCursorBufferPosition([8, 2]);
          jumpTo = new JumpTo();
          return expect(jumpTo.referenceDefinition()).toBe(false);
        });
        it("finds definition (on the line)", function() {
          var jumpTo;
          editor.setCursorBufferPosition([3, 0]);
          jumpTo = new JumpTo();
          return expect(jumpTo.referenceDefinition()).toEqual([6, 0]);
        });
        it("finds definition (empty id label)", function() {
          var jumpTo;
          editor.setCursorBufferPosition([4, 8]);
          jumpTo = new JumpTo();
          return expect(jumpTo.referenceDefinition()).toEqual([7, 0]);
        });
        it("finds reference (on the line)", function() {
          var jumpTo;
          editor.setCursorBufferPosition([6, 0]);
          jumpTo = new JumpTo();
          return expect(jumpTo.referenceDefinition()).toEqual([3, 8]);
        });
        return it("finds reference (empty id label)", function() {
          var jumpTo;
          editor.setCursorBufferPosition([7, 4]);
          jumpTo = new JumpTo();
          return expect(jumpTo.referenceDefinition()).toEqual([4, 8]);
        });
      });
      return describe("foonotes", function() {
        beforeEach(function() {
          return editor.setText(text);
        });
        it("finds definition", function() {
          var jumpTo;
          editor.setCursorBufferPosition([10, 12]);
          jumpTo = new JumpTo();
          return expect(jumpTo.referenceDefinition()).toEqual([12, 2]);
        });
        return it("finds reference", function() {
          var jumpTo;
          editor.setCursorBufferPosition([12, 6]);
          jumpTo = new JumpTo();
          return expect(jumpTo.referenceDefinition()).toEqual([10, 9]);
        });
      });
    });
    return describe(".nextTableCell", function() {
      beforeEach(function() {
        return editor.setText("this is a table:\n\n| Header One | Header Two |\n|:-----------|:-----------|\n| Item One   | Item Two   |\n\nthis is another table:\n\nHeader One    |   Header Two | Header Three\n:-------------|-------------:|:-----------:\nItem One      |     Item Two |  Item Three");
      });
      it("finds nothing if it is not a table row", function() {
        var jumpTo;
        editor.setCursorBufferPosition([0, 2]);
        jumpTo = new JumpTo();
        return expect(jumpTo.nextTableCell()).toBe(false);
      });
      it("finds row 1, cell 2 in table 1", function() {
        var jumpTo;
        editor.setCursorBufferPosition([2, 2]);
        jumpTo = new JumpTo();
        return expect(jumpTo.nextTableCell()).toEqual([2, 25]);
      });
      it("finds row 2, cell 1 in table 1 from end of row 1", function() {
        var jumpTo;
        editor.setCursorBufferPosition([2, 25]);
        jumpTo = new JumpTo();
        return expect(jumpTo.nextTableCell()).toEqual([4, 10]);
      });
      it("finds row 2, cell 1 in table 1 from row separator", function() {
        var jumpTo;
        editor.setCursorBufferPosition([3, 0]);
        jumpTo = new JumpTo();
        return expect(jumpTo.nextTableCell()).toEqual([4, 10]);
      });
      it("finds row 1, cell 3 in table 2", function() {
        var jumpTo;
        editor.setCursorBufferPosition([8, 24]);
        jumpTo = new JumpTo();
        return expect(jumpTo.nextTableCell()).toEqual([8, 43]);
      });
      return it("finds row 2, cell 1 in table 2", function() {
        var jumpTo;
        editor.setCursorBufferPosition([8, 42]);
        jumpTo = new JumpTo();
        return expect(jumpTo.nextTableCell()).toEqual([10, 8]);
      });
    });
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL2hvbWUvcmlkZGxlLy5hdG9tL3BhY2thZ2VzL21hcmtkb3duLXdyaXRlci9zcGVjL2NvbW1hbmRzL2p1bXAtdG8tc3BlYy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxNQUFBOztFQUFBLE1BQUEsR0FBUyxPQUFBLENBQVEsNEJBQVI7O0VBRVQsUUFBQSxDQUFTLFFBQVQsRUFBbUIsU0FBQTtBQUNqQixRQUFBO0lBQUEsTUFBQSxHQUFTO0lBRVQsVUFBQSxDQUFXLFNBQUE7TUFDVCxlQUFBLENBQWdCLFNBQUE7ZUFBRyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQWYsQ0FBb0IsZ0JBQXBCO01BQUgsQ0FBaEI7YUFDQSxJQUFBLENBQUssU0FBQTtlQUFHLE1BQUEsR0FBUyxJQUFJLENBQUMsU0FBUyxDQUFDLG1CQUFmLENBQUE7TUFBWixDQUFMO0lBRlMsQ0FBWDtJQUlBLFFBQUEsQ0FBUyxVQUFULEVBQXFCLFNBQUE7TUFDbkIsRUFBQSxDQUFHLDBCQUFILEVBQStCLFNBQUE7QUFDN0IsWUFBQTtRQUFBLE1BQUEsR0FBYSxJQUFBLE1BQUEsQ0FBTyxjQUFQO1FBQ2IsS0FBQSxDQUFNLE1BQU4sRUFBYyxhQUFkO1FBRUEsTUFBTSxDQUFDLE9BQVAsQ0FBZTtVQUFBLGVBQUEsRUFBaUIsU0FBQTttQkFBRztVQUFILENBQWpCO1NBQWY7ZUFFQSxNQUFBLENBQU8sTUFBTSxDQUFDLFdBQWQsQ0FBMEIsQ0FBQyxnQkFBM0IsQ0FBQTtNQU42QixDQUEvQjthQVFBLEVBQUEsQ0FBRywyQkFBSCxFQUFnQyxTQUFBO0FBQzlCLFlBQUE7UUFBQSxNQUFBLEdBQWEsSUFBQSxNQUFBLENBQU8sa0JBQVA7UUFFYixNQUFNLENBQUMsZUFBUCxHQUF5QixTQUFBO2lCQUFHLENBQUMsQ0FBRCxFQUFJLENBQUo7UUFBSDtRQUN6QixLQUFBLENBQU0sTUFBTSxDQUFDLE1BQWIsRUFBcUIseUJBQXJCO1FB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QSxDQUFHLGdDQUFILEVBQXFDLFNBQUE7QUFDbkMsWUFBQTtRQUFBLE1BQU0sQ0FBQyx1QkFBUCxDQUErQixDQUFDLENBQUQsRUFBSSxFQUFKLENBQS9CO1FBQ0EsTUFBQSxHQUFhLElBQUEsTUFBQSxDQUFBO2VBQ2IsTUFBQSxDQUFPLE1BQU0sQ0FBQyxhQUFQLENBQUEsQ0FBUCxDQUE4QixDQUFDLE9BQS9CLENBQXVDLENBQUMsQ0FBRCxFQUFJLEVBQUosQ0FBdkM7TUFIbUMsQ0FBckM7YUFLQSxFQUFBLENBQUcsZ0NBQUgsRUFBcUMsU0FBQTtBQUNuQyxZQUFBO1FBQUEsTUFBTSxDQUFDLHVCQUFQLENBQStCLENBQUMsQ0FBRCxFQUFJLEVBQUosQ0FBL0I7UUFDQSxNQUFBLEdBQWEsSUFBQSxNQUFBLENBQUE7ZUFDYixNQUFBLENBQU8sTUFBTSxDQUFDLGFBQVAsQ0FBQSxDQUFQLENBQThCLENBQUMsT0FBL0IsQ0FBdUMsQ0FBQyxFQUFELEVBQUssQ0FBTCxDQUF2QztNQUhtQyxDQUFyQztJQXpDeUIsQ0FBM0I7RUFyS2lCLENBQW5CO0FBRkEiLCJzb3VyY2VzQ29udGVudCI6WyJKdW1wVG8gPSByZXF1aXJlIFwiLi4vLi4vbGliL2NvbW1hbmRzL2p1bXAtdG9cIlxuXG5kZXNjcmliZSBcIkp1bXBUb1wiLCAtPlxuICBlZGl0b3IgPSBudWxsXG5cbiAgYmVmb3JlRWFjaCAtPlxuICAgIHdhaXRzRm9yUHJvbWlzZSAtPiBhdG9tLndvcmtzcGFjZS5vcGVuKFwiZW1wdHkubWFya2Rvd25cIilcbiAgICBydW5zIC0+IGVkaXRvciA9IGF0b20ud29ya3NwYWNlLmdldEFjdGl2ZVRleHRFZGl0b3IoKVxuXG4gIGRlc2NyaWJlIFwiLnRyaWdnZXJcIiwgLT5cbiAgICBpdCBcInRyaWdnZXJzIGNvcnJlY3QgY29tbWFuZFwiLCAtPlxuICAgICAganVtcFRvID0gbmV3IEp1bXBUbyhcIm5leHQtaGVhZGluZ1wiKVxuICAgICAgc3B5T24oanVtcFRvLCBcIm5leHRIZWFkaW5nXCIpXG5cbiAgICAgIGp1bXBUby50cmlnZ2VyKGFib3J0S2V5QmluZGluZzogLT4ge30pXG5cbiAgICAgIGV4cGVjdChqdW1wVG8ubmV4dEhlYWRpbmcpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuXG4gICAgaXQgXCJqdW1wcyB0byBjb3JyZWN0IHBvc2l0aW9uXCIsIC0+XG4gICAgICBqdW1wVG8gPSBuZXcgSnVtcFRvKFwicHJldmlvdXMtaGVhZGluZ1wiKVxuXG4gICAgICBqdW1wVG8ucHJldmlvdXNIZWFkaW5nID0gLT4gWzUsIDVdXG4gICAgICBzcHlPbihqdW1wVG8uZWRpdG9yLCBcInNldEN1cnNvckJ1ZmZlclBvc2l0aW9uXCIpXG5cbiAgICAgIGp1bXBUby50cmlnZ2VyKClcblxuICAgICAgZXhwZWN0KGp1bXBUby5lZGl0b3Iuc2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFs1LCA1XSlcblxuICBkZXNjcmliZSBcIi5wcmV2aW91c0hlYWRpbmdcIiwgLT5cbiAgICB0ZXh0ID0gXCJcIlwiXG4gICAgIyBUaXRsZVxuXG4gICAgY29udGVudCBjb250ZW50XG5cbiAgICAjIyBTdWJ0aXRsZVxuXG4gICAgY29udGVudCBjb250ZW50XG4gICAgXCJcIlwiXG5cbiAgICBpdCBcImZpbmRzIG5vdGhpbmcgaWYgbm8gaGVhZGluZ3NcIiwgLT5cbiAgICAgIGp1bXBUbyA9IG5ldyBKdW1wVG8oKVxuICAgICAgZXhwZWN0KGp1bXBUby5wcmV2aW91c0hlYWRpbmcoKSkudG9CZShmYWxzZSlcblxuICAgIGl0IFwiZmluZHMgbm90aGluZyBpZiBubyBwcmV2aW91cyBoZWFkaW5nXCIsIC0+XG4gICAgICBlZGl0b3Iuc2V0VGV4dCh0ZXh0KVxuICAgICAgZWRpdG9yLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKFswLCAxXSlcblxuICAgICAganVtcFRvID0gbmV3IEp1bXBUbygpXG4gICAgICBleHBlY3QoanVtcFRvLnByZXZpb3VzSGVhZGluZygpKS50b0VxdWFsKGZhbHNlKVxuXG4gICAgaXQgXCJmaW5kcyBwcmV2aW91cyBzdWJ0aXRsZVwiLCAtPlxuICAgICAgZWRpdG9yLnNldFRleHQodGV4dClcbiAgICAgIGVkaXRvci5zZXRDdXJzb3JCdWZmZXJQb3NpdGlvbihbNiwgNl0pXG5cbiAgICAgIGp1bXBUbyA9IG5ldyBKdW1wVG8oKVxuICAgICAgZXhwZWN0KGp1bXBUby5wcmV2aW91c0hlYWRpbmcoKSkudG9FcXVhbChyb3c6IDQsIGNvbHVtbjogMClcblxuICAgIGl0IFwiZmluZHMgcHJldmlvdXMgdGl0bGVcIiwgLT5cbiAgICAgIGVkaXRvci5zZXRUZXh0KHRleHQpXG4gICAgICBlZGl0b3Iuc2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oWzQsIDFdKVxuXG4gICAgICBqdW1wVG8gPSBuZXcgSnVtcFRvKClcbiAgICAgIGV4cGVjdChqdW1wVG8ucHJldmlvdXNIZWFkaW5nKCkpLnRvRXF1YWwocm93OiAwLCBjb2x1bW46IDApXG5cbiAgZGVzY3JpYmUgXCIubmV4dEhlYWRpbmdcIiwgLT5cbiAgICB0ZXh0ID0gXCJcIlwiXG4gICAgIyBUaXRsZVxuXG4gICAgY29udGVudCBjb250ZW50XG5cbiAgICAjIyBTdWJ0aXRsZVxuXG4gICAgY29udGVudCBjb250ZW50XG4gICAgXCJcIlwiXG5cbiAgICBpdCBcImZpbmRzIG5vdGhpbmcgaWYgbm8gaGVhZGluZ3NcIiwgLT5cbiAgICAgIGp1bXBUbyA9IG5ldyBKdW1wVG8oKVxuICAgICAgZXhwZWN0KGp1bXBUby5uZXh0SGVhZGluZygpKS50b0JlKGZhbHNlKVxuXG4gICAgaXQgXCJmaW5kcyBuZXh0IHN1YnRpdGxlXCIsIC0+XG4gICAgICBlZGl0b3Iuc2V0VGV4dCh0ZXh0KVxuICAgICAgZWRpdG9yLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKFszLCA2XSlcblxuICAgICAganVtcFRvID0gbmV3IEp1bXBUbygpXG4gICAgICBleHBlY3QoanVtcFRvLm5leHRIZWFkaW5nKCkpLnRvRXF1YWwocm93OiA0LCBjb2x1bW46IDApXG5cbiAgICBpdCBcImZpbmRzIHRvcCB0aXRsZVwiLCAtPlxuICAgICAgZWRpdG9yLnNldFRleHQodGV4dClcbiAgICAgIGVkaXRvci5zZXRDdXJzb3JCdWZmZXJQb3NpdGlvbihbNiwgNV0pXG5cbiAgICAgIGp1bXBUbyA9IG5ldyBKdW1wVG8oKVxuICAgICAgZXhwZWN0KGp1bXBUby5uZXh0SGVhZGluZygpKS50b0VxdWFsKHJvdzogMCwgY29sdW1uOiAwKVxuXG4gIGRlc2NyaWJlIFwiLnJlZmVyZW5jZURlZmluaXRpb25cIiwgLT5cbiAgICB0ZXh0ID0gXCJcIlwiXG4gICAgZW1wdHkgbGluZSB3aXRoIG5vIGxpbmtcbiAgICBlbXB0eSBsaW5lIHdpdGggb3JwaGFuIFtsaW5rXVtsaW5rXVxuXG4gICAgbGluayB0byBbemh1b2NodW4vbWQtd3JpdGVyXVtjZmMyN2IwMV0gc2hvdWxkIHdvcmtcbiAgICBsaW5rIHRvIFtNYXJrZG93bi1Xcml0ZXIgZm9yIEF0b21dW10gc2hvdWxkIHdvcmsgYXMgd2VsbFxuXG4gICAgICBbY2ZjMjdiMDFdOiBodHRwczovL2dpdGh1Yi5jb20vemh1b2NodW4vbWQtd3JpdGVyIFwiTWFya2Rvd24tV3JpdGVyIGZvciBBdG9tXCJcbiAgICAgIFtNYXJrZG93bi1Xcml0ZXIgZm9yIEF0b21dOiBodHRwczovL2dpdGh1Yi5jb20vemh1b2NodW4vbWQtd3JpdGVyIFwiTWFya2Rvd24tV3JpdGVyIGZvciBBdG9tXCJcbiAgICAgIFtub2ZvdW5kXTogaHR0cHM6Ly9leGFtcGxlLmNvbVxuXG4gICAgZm9vdG5vdGVzW15mbl0gaXMgYSBraW5kIG9mIHNwZWNpYWwgbGlua1xuXG4gICAgICBbXmZuXTogZm9vdG5vdGUgZGVmaW5pdGlvblxuICAgIFwiXCJcIlxuXG4gICAgaXQgXCJmaW5kcyBub3RoaW5nIGlmIG5vIHdvcmQgdW5kZXIgY3Vyc29yXCIsIC0+XG4gICAgICBqdW1wVG8gPSBuZXcgSnVtcFRvKClcbiAgICAgIGV4cGVjdChqdW1wVG8ucmVmZXJlbmNlRGVmaW5pdGlvbigpKS50b0JlKGZhbHNlKVxuXG4gICAgaXQgXCJmaW5kcyBub3RoaW5nIGlmIG5vIGxpbmsgZm91bmRcIiwgLT5cbiAgICAgIGVkaXRvci5zZXRUZXh0KHRleHQpXG4gICAgICBlZGl0b3Iuc2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oWzAsIDJdKVxuXG4gICAgICBqdW1wVG8gPSBuZXcgSnVtcFRvKClcbiAgICAgIGV4cGVjdChqdW1wVG8ucmVmZXJlbmNlRGVmaW5pdGlvbigpKS50b0JlKGZhbHNlKVxuXG4gICAgZGVzY3JpYmUgXCJsaW5rc1wiLCAtPlxuICAgICAgYmVmb3JlRWFjaCAtPiBlZGl0b3Iuc2V0VGV4dCh0ZXh0KVxuXG4gICAgICBpdCBcImZpbmRzIG5vdGhpbmcgaWYgbm8gbGluayBkZWZpbml0aW9uXCIsIC0+XG4gICAgICAgIGVkaXRvci5zZXRDdXJzb3JCdWZmZXJQb3NpdGlvbihbMSwgMl0pXG4gICAgICAgIGp1bXBUbyA9IG5ldyBKdW1wVG8oKVxuICAgICAgICBleHBlY3QoanVtcFRvLnJlZmVyZW5jZURlZmluaXRpb24oKSkudG9CZShmYWxzZSlcblxuICAgICAgaXQgXCJmaW5kcyBub3RoaW5nIGlmIG5vIGxpbmsgcmVmZXJlbmNlXCIsIC0+XG4gICAgICAgIGVkaXRvci5zZXRDdXJzb3JCdWZmZXJQb3NpdGlvbihbOCwgMl0pXG4gICAgICAgIGp1bXBUbyA9IG5ldyBKdW1wVG8oKVxuICAgICAgICBleHBlY3QoanVtcFRvLnJlZmVyZW5jZURlZmluaXRpb24oKSkudG9CZShmYWxzZSlcblxuICAgICAgaXQgXCJmaW5kcyBkZWZpbml0aW9uIChvbiB0aGUgbGluZSlcIiwgLT5cbiAgICAgICAgZWRpdG9yLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKFszLCAwXSlcbiAgICAgICAganVtcFRvID0gbmV3IEp1bXBUbygpXG4gICAgICAgIGV4cGVjdChqdW1wVG8ucmVmZXJlbmNlRGVmaW5pdGlvbigpKS50b0VxdWFsKFs2LCAwXSlcblxuICAgICAgaXQgXCJmaW5kcyBkZWZpbml0aW9uIChlbXB0eSBpZCBsYWJlbClcIiwgLT5cbiAgICAgICAgZWRpdG9yLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKFs0LCA4XSlcbiAgICAgICAganVtcFRvID0gbmV3IEp1bXBUbygpXG4gICAgICAgIGV4cGVjdChqdW1wVG8ucmVmZXJlbmNlRGVmaW5pdGlvbigpKS50b0VxdWFsKFs3LCAwXSlcblxuICAgICAgaXQgXCJmaW5kcyByZWZlcmVuY2UgKG9uIHRoZSBsaW5lKVwiLCAtPlxuICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oWzYsIDBdKVxuICAgICAgICBqdW1wVG8gPSBuZXcgSnVtcFRvKClcbiAgICAgICAgZXhwZWN0KGp1bXBUby5yZWZlcmVuY2VEZWZpbml0aW9uKCkpLnRvRXF1YWwoWzMsIDhdKVxuXG4gICAgICBpdCBcImZpbmRzIHJlZmVyZW5jZSAoZW1wdHkgaWQgbGFiZWwpXCIsIC0+XG4gICAgICAgIGVkaXRvci5zZXRDdXJzb3JCdWZmZXJQb3NpdGlvbihbNywgNF0pXG4gICAgICAgIGp1bXBUbyA9IG5ldyBKdW1wVG8oKVxuICAgICAgICBleHBlY3QoanVtcFRvLnJlZmVyZW5jZURlZmluaXRpb24oKSkudG9FcXVhbChbNCwgOF0pXG5cbiAgICBkZXNjcmliZSBcImZvb25vdGVzXCIsIC0+XG4gICAgICBiZWZvcmVFYWNoIC0+IGVkaXRvci5zZXRUZXh0KHRleHQpXG5cbiAgICAgIGl0IFwiZmluZHMgZGVmaW5pdGlvblwiLCAtPlxuICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oWzEwLCAxMl0pXG4gICAgICAgIGp1bXBUbyA9IG5ldyBKdW1wVG8oKVxuICAgICAgICBleHBlY3QoanVtcFRvLnJlZmVyZW5jZURlZmluaXRpb24oKSkudG9FcXVhbChbMTIsIDJdKVxuXG4gICAgICBpdCBcImZpbmRzIHJlZmVyZW5jZVwiLCAtPlxuICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oWzEyLCA2XSlcbiAgICAgICAganVtcFRvID0gbmV3IEp1bXBUbygpXG4gICAgICAgIGV4cGVjdChqdW1wVG8ucmVmZXJlbmNlRGVmaW5pdGlvbigpKS50b0VxdWFsKFsxMCwgOV0pXG5cbiAgZGVzY3JpYmUgXCIubmV4dFRhYmxlQ2VsbFwiLCAtPlxuICAgIGJlZm9yZUVhY2ggLT5cbiAgICAgIGVkaXRvci5zZXRUZXh0IFwiXCJcIlxuICAgICAgdGhpcyBpcyBhIHRhYmxlOlxuXG4gICAgICB8IEhlYWRlciBPbmUgfCBIZWFkZXIgVHdvIHxcbiAgICAgIHw6LS0tLS0tLS0tLS18Oi0tLS0tLS0tLS0tfFxuICAgICAgfCBJdGVtIE9uZSAgIHwgSXRlbSBUd28gICB8XG5cbiAgICAgIHRoaXMgaXMgYW5vdGhlciB0YWJsZTpcblxuICAgICAgSGVhZGVyIE9uZSAgICB8ICAgSGVhZGVyIFR3byB8IEhlYWRlciBUaHJlZVxuICAgICAgOi0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLTp8Oi0tLS0tLS0tLS0tOlxuICAgICAgSXRlbSBPbmUgICAgICB8ICAgICBJdGVtIFR3byB8ICBJdGVtIFRocmVlXG4gICAgICBcIlwiXCJcblxuICAgIGl0IFwiZmluZHMgbm90aGluZyBpZiBpdCBpcyBub3QgYSB0YWJsZSByb3dcIiwgLT5cbiAgICAgIGVkaXRvci5zZXRDdXJzb3JCdWZmZXJQb3NpdGlvbihbMCwgMl0pXG4gICAgICBqdW1wVG8gPSBuZXcgSnVtcFRvKClcbiAgICAgIGV4cGVjdChqdW1wVG8ubmV4dFRhYmxlQ2VsbCgpKS50b0JlKGZhbHNlKVxuXG4gICAgaXQgXCJmaW5kcyByb3cgMSwgY2VsbCAyIGluIHRhYmxlIDFcIiwgLT5cbiAgICAgIGVkaXRvci5zZXRDdXJzb3JCdWZmZXJQb3NpdGlvbihbMiwgMl0pXG4gICAgICBqdW1wVG8gPSBuZXcgSnVtcFRvKClcbiAgICAgIGV4cGVjdChqdW1wVG8ubmV4dFRhYmxlQ2VsbCgpKS50b0VxdWFsKFsyLCAyNV0pXG5cbiAgICBpdCBcImZpbmRzIHJvdyAyLCBjZWxsIDEgaW4gdGFibGUgMSBmcm9tIGVuZCBvZiByb3cgMVwiLCAtPlxuICAgICAgZWRpdG9yLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKFsyLCAyNV0pXG4gICAgICBqdW1wVG8gPSBuZXcgSnVtcFRvKClcbiAgICAgIGV4cGVjdChqdW1wVG8ubmV4dFRhYmxlQ2VsbCgpKS50b0VxdWFsKFs0LCAxMF0pXG5cbiAgICBpdCBcImZpbmRzIHJvdyAyLCBjZWxsIDEgaW4gdGFibGUgMSBmcm9tIHJvdyBzZXBhcmF0b3JcIiwgLT5cbiAgICAgIGVkaXRvci5zZXRDdXJzb3JCdWZmZXJQb3NpdGlvbihbMywgMF0pXG4gICAgICBqdW1wVG8gPSBuZXcgSnVtcFRvKClcbiAgICAgIGV4cGVjdChqdW1wVG8ubmV4dFRhYmxlQ2VsbCgpKS50b0VxdWFsKFs0LCAxMF0pXG5cbiAgICBpdCBcImZpbmRzIHJvdyAxLCBjZWxsIDMgaW4gdGFibGUgMlwiLCAtPlxuICAgICAgZWRpdG9yLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKFs4LCAyNF0pXG4gICAgICBqdW1wVG8gPSBuZXcgSnVtcFRvKClcbiAgICAgIGV4cGVjdChqdW1wVG8ubmV4dFRhYmxlQ2VsbCgpKS50b0VxdWFsKFs4LCA0M10pXG5cbiAgICBpdCBcImZpbmRzIHJvdyAyLCBjZWxsIDEgaW4gdGFibGUgMlwiLCAtPlxuICAgICAgZWRpdG9yLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKFs4LCA0Ml0pXG4gICAgICBqdW1wVG8gPSBuZXcgSnVtcFRvKClcbiAgICAgIGV4cGVjdChqdW1wVG8ubmV4dFRhYmxlQ2VsbCgpKS50b0VxdWFsKFsxMCwgOF0pXG4iXX0=
