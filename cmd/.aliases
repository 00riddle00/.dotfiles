########### 
# VARIABLES 
########### 

# DOTFILES USER SETTINGS
export DOTFILES_USER=dotfiles
export DOTFILES_DIR=/home/$DOTFILES_USER


# DOTFILES VARS
export AUTOMATION_DIR=$DOTFILES_DIR/automation
export SHELL_SCRIPTS_DIR=$DOTFILES_DIR/shell-scripts
export ACTIVATE=$SHELL_SCRIPTS_DIR/activate.sh
export FOCUS=$SHELL_SCRIPTS_DIR/focus.sh
export VIMNOTES='$SHELL_SCRIPTS_DIR/vimnotes.sh'
export LESSOPEN='|$DOTFILES_DIR/cmd/.lessfilter %s'

# MAIN USER SETTINGS
export MAIN_USER=riddle
export MAIN_HOME=/home/$MAIN_USER

# MAIN USER VARS
export DOWNLOADS=$MAIN_HOME/Downloads
export DW=$MAIN_HOME/Downloads
export DROPBOX=$MAIN_HOME/Dropbox
export TMP=$MAIN_HOME/tmp1
export TMP1=$MAIN_HOME/tmp1
export TMP2=$MAIN_HOME/tmp2
export PRO=$MAIN_HOME/pro
export SYNC=$DROPBOX/sync
export CANDY=$SYNC/candy
export NOTES=$SYNC/gtd/content/pages
export KEEP=$SYNC/keepass
export VENV=$MAIN_HOME/venvs/sql_app
export SENV=$MAIN_HOME/venvs/subscription_demo

# CURRENT USER VARS
## there has been no need so far 

# SYSTEMWIDE VARS
export TERM=terminator 
export LSCOLORS=ExFxCxDxBxegedabagacad
export LESS='-R'
export EDITOR=vim
export LC_ALL='en_US.UTF-8' 
export THEME=riddle

######### 
# ALIASES 
######### 

# DOTFILES COMMANDS 
alias dot='cd $DOTFILES_DIR'
alias arp='v $DOTFILES_DIR/packages/archlinux/packages_main_repo'
alias aur='v $DOTFILES_DIR/packages/archlinux/packages_aur'
alias dotm='cd $DOTFILES_DIR/.dotfiles-manager/'
alias makezsh='ln -sf $DOTFILES_DIR/cmd/.zshrc $MAIN_HOME/.zshrc'
alias ig='v $DOTFILES_DIR/.gitignore'
alias she='cd $SHELL_SCRIPTS_DIR'
alias auk='$SHELL_SCRIPTS_DIR/autokey.sh'
alias aut='cd $AUTOMATION_DIR'
alias col='$AUTOMATION_DIR/shell_scripts/post_install/collect_dotfiles.sh'
alias dis='$AUTOMATION_DIR/shell_scripts/post_install/disperse_dotfiles.sh'
alias theme.matrix='$SHELL_SCRIPTS_DIR/themes/matrix/run.sh'
alias theme.riddle='$SHELL_SCRIPTS_DIR/themes/riddle/run.sh'

# MAIN USER COMMANDS 

## navigation
alias main='cd $MAIN_HOME/main'
alias tmp4='cd $MAIN_HOME/tmp4'
alias bak='cd $MAIN_HOME/backups'
alias dag.dir='cd $MAIN_HOME/lxc/dag-builder/ && venv'
alias xconf='cd $MAIN_HOME/.config/xfce4/xfconf/xfce-perchannel-xml'
alias scard='cd $MAIN_HOME/osos/scard/'
alias sca='cd $MAIN_HOME/VirtualBox\ VMs/scard-api'
alias tmp3='cd $MAIN_HOME/tmp3/'
alias vi='cd $MAIN_HOME/VirtualBox\ VMs/'
alias viu='cd $MAIN_HOME/VirtualBox\ VMs/ && vu'
alias vis='cd $MAIN_HOME/VirtualBox\ VMs/ && vs'
alias op='cd $MAIN_HOME/.config/openbox'
alias pro='cd $MAIN_HOME/pro'
alias sec='cd $MAIN_HOME/.sec'
alias notes='cd $NOTES'
alias to='cd $MAIN_HOME/.todo/'
alias ahl='cd $MAIN_HOME/pro/ahl.360/ahl360-api'
alias upd='cp $NOTES/tmp1/360_swagger.yml api.yml'
alias amos='cd $MAIN_HOME/langs/hebrew/amos_oz'
alias hlsaves='cd $MAIN_HOME/.local/share/Steam/steamapps/common/Half-Life\ 2/hl2/save'
alias wiki='cd $MAIN_HOME/Dropbox/sync/gtd/content/pages/terahyde/wiki'
alias drop='cd $DROPBOX'
alias keep='cd $KEEP && keepass 8gb.kdbx'
alias can='cd $CANDY'
alias sync='cd $SYNC'
alias cs='cd $MAIN_HOME/CS'
alias stat='cd $MAIN_HOME/pro/statybininkai'
alias ads='cd $MAIN_HOME/CS/2_semester/ads'
alias tmp='cd $MAIN_HOME/tmp1'
alias tmp1='cd $MAIN_HOME/tmp1'
alias tmp2='cd $MAIN_HOME/tmp2'
alias tmp3='cd $MAIN_HOME/tmp3'
alias dok='cd $MAIN_HOME/docker'
alias cl='cd $MAIN_HOME/c_lang/LCTHW'
alias di='cd $MAIN_HOME/VirtualBox\ VMs/dienynas/app'
alias sca='cd $MAIN_HOME/VirtualBox\ VMs/scard-api/'
alias gri='cd $MAIN_HOME/VirtualBox\ VMs/grigiskes-api/app'
alias u2='cd $MAIN_HOME/CS/2_semester/programavimas_c/code/U2'
alias dw='cd $MAIN_HOME/Downloads/'

## editing commands
alias tmuxr='v $MAIN_HOME/.tmux.conf '
alias term='v $MAIN_HOME/.config/terminator/config'
alias tintrc='v $MAIN_HOME/.config/tint2/tint2rc'
alias vrc='v $MAIN_HOME/.vimrc'
alias ic='v $MAIN_HOME/.config/i3/config'
alias xi='v $MAIN_HOME/.xinitrc'
alias zr='v $MAIN_HOME/.zshrc'
alias al='v $MAIN_HOME/.aliases'
alias gtk='v $MAIN_HOME/.gtkrc-2.0'
alias mim='v $MAIN_HOME/.config/mimeapps.list'
alias vr='v $MAIN_HOME/.vimrc'
alias br='v $MAIN_HOME/.bashrc'
alias termc='v $MAIN_HOME/.config/terminator/config'
alias start='v $MAIN_HOME/.config/openbox/autostart.sh'
alias rc='v $MAIN_HOME/.config/openbox/rc.xml'
alias menu='sudo v $MAIN_HOME/.config/openbox/menu.xml'

## other commands
alias ch='s chown -R $MAIN_USER:$MAIN_USER'
alias pic='scrot -s $MAIN_HOME/Screenshots/screenshot-%F-%H%M%S.png'
alias mchef='$MAIN_HOME/programs/mongochef-4.0.4-linux-x64-dist/bin/mongochef.sh'
alias ww='python $MAIN_HOME/welcome.py'
alias hi='mpg123 $MAIN_HOME/ca | cowthink -f $(find /usr/share/cows -type f | shuf -n 1)'
alias tb='tail -n 20 $MAIN_HOME/.aliases'
alias del="sed -i '$ d' $MAIN_HOME/.aliases"
alias t='$MAIN_HOME/.todo/todo.sh'
alias air='source $MAIN_HOME/pro/env/bin/activate && cd $MAIN_HOME/airflow'
alias and='cp $MAIN_HOME/Dropbox/sync/android/\(a\)notes/notes.txt $MAIN_HOME/Dropbox/sync/gtd/content/pages/tmp/android.md'
alias kan='cat $MAIN_HOME/pro/fl/social/kan.js | xclip'
alias xresources='xrdb -merge $MAIN_HOME/.Xresources'
alias xdefaults='xrdb -merge $MAIN_HOME/.Xdefaults'
alias anv='source $MAIN_HOME/venvs/ahl.360/bin/activate'
alias key='eval $(ssh-agent -s) && ssh-add $MAIN_HOME/.ssh/id_rsa'
alias autostart='$MAIN_HOME/.config/openbox/autostart.sh'


# CURRENT USER COMMANDS 
## there has been no need so far


# SYSTEMWIDE COMMANDS

## various commands
alias te='v tests.py'
alias doker='sudo systemctl start docker.service'
alias reb='make rebuild'
alias exe='./main.exe'
alias ya='yaourt --noconfirm'
alias yaup='yaourt -Syu --aur --noconfirm'
alias stop='killall mpg123'
alias genkeys='cpr tmp1/keys2.xml .config/xfce4/xfconf/xfce-perchannel-xml/xfce4-keyboard-shortcuts.xml && cpr tmp1/keys2.xml /etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-keyboard-shortcuts.xml'
alias xout='xfce4-session-logout'
alias cki='conky -c .conky/stats && conky -c .conky/conkyrc_HUD && conky -c .conky/archconky'
alias ckil='killall conky'
alias whatip='curl http://icanhazip.com'
alias stopit='killall mpg123'
alias kil='sudo kill -9'
alias xfce='exec xfce4-session'
alias au='ps aux | grep -i'
alias tm='conky -c .conky/archconky &'
alias um='sudo umount /dev/sdb1'
alias il='setxkbmap -option grp:setxkbmap -option grp:alt_shift_toggle us,lt,il'
alias ru='setxkbmap ru phonetic'
alias de='setxkbmap -option grp:setxkbmap -option grp:alt_shift_toggle us,lt,de'
alias mk='./make_zip.sh paysera_test'
alias von='s ipsec start && s ipsec up JIRA && s ipsec up MBS'
alias vof='s ipsec down MBS && s ipsec down JIRA'
alias lsd='lxc-ls -f'
alias ap='ansible-playbook'
alias app='ansible-playbook centos.yml'
alias xplus='light -A 10'
alias xminus='light -U 10'
alias ta='t add'
alias getkey='gpg --keyserver keyserver.ubuntu.com --recv '
alias makex='s chmod +x'
alias starwars='telnet towel.blinkenlights.nl'
alias outi='i3-msg exit'
alias aplus='amixer set Master 10%+'
alias aminus='amixer set Master 10%-'
alias mute='amixer -q sset Master toggle'
alias dum='du -h --max-depth=1'
alias fonts.update='fc-cache -fv'
alias nn='notes && tree'
alias i='h | grep '
alias trackmem='watch -n 5 du -h --max-depth=1'
alias dusort='du -hs * | sort -h'
alias panh='pandoc -f html -t markdown-raw_html-native_divs-native_spans'
alias gi='v .gitignore'
alias sym='find . -maxdepth 1 -type l -print'   
alias video='lspci | grep -e VGA -e 3D'
alias nocaps='sudo dumpkeys | sed "s/\s*58\s*=\s*Caps_Lock/ 58 = Control/" | sudo loadkeys'
alias testas='(dumpkeys | grep keymaps; echo "keycode 58 = Control") | loadkeys'
alias playb='mplayer -vo fbdev2 '
alias ovh='ssh root@tomasgiedraitis.com'
alias npmls='npm list -g --depth=0'
alias files='find . -type d -name "files" -print'
alias cfr='fortune -c | cowthink -f $(find /usr/share/cows -type f | shuf -n 1)'
alias cf='fortune | cowsay' 
alias mkinit='sudo mkinitcpio -p linux'
alias mkgrub='sudo grub-mkconfig -o /boot/grub/grub.cfg'

## basic commands
alias b='bash'
alias s='sudo'
alias let='s chmod 755'
alias letr='s chmod -R 755'
alias ls='ls --color=auto'
alias lsr='ls -R'
alias lf='lsblk -f'
alias lsa='ls -a'
alias lsl='ls -l'
alias lsla='ls -al'
alias lsal='ls -al'
alias las='ls -al'
alias lc='ls | cat'
alias cpr='s cp -r'
alias rmr='s rm -r'
alias mvr='s mv -r'
alias grep='grep  --color=auto --exclude-dir={.bzr,CVS,.git,.hg,.svn}'
alias grepi='grep -i'
alias pag='ps aux | grepi'
alias c='clear'
alias kil='sudo kill -9'
alias more='less'
alias clock='s date +%T -s'
alias tar='tar -xvf'
alias q='exit'
alias re='sudo reboot'
alias off='sudo poweroff'
alias h='history'
alias w='whoami'
alias sa='ssh-add'
alias sl='ssh-add -l'
alias ho='hostname'
alias rl='readlink -f'
alias fl='sudo fdisk -l'
alias ssid='eval $(ssh-agent -s)'

## basic navigation
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'
alias .....='cd ../../../..'
alias root='cd /'

## navigation
alias serv='cd /var/www'
alias srv='cd /srv/http/'

## pacman
alias orphans='pacman -Qdt'
alias orphans2='pacman -Qdtd'
alias pacfile='sudo pacman -S --noconfirm - --needed <'
alias pacs='sudo pacman -S --noconfirm --needed' 
alias pacu='sudo pacman -U'
alias pacr='sudo pacman -R'
alias pacrs='sudo pacman -Rs'
alias up='sudo pacman -Syyu'
alias mps='makepkg -s'
alias mp='makepkg'
alias y='yaourt'
alias what='sudo pacman -Qs'
alias pld='sudo pacman -Q'
alias pl='sudo pacman -Qe'
alias is='pld | grepi '

## openbox
alias openbox='exec openbox-session'
alias reop='openbox --reconfigure'
alias wall='feh --bg-scale'
alias out='sudo openbox --exit'

## programs
alias conda='/opt/anaconda/bin/conda'
alias dc='docker-compose'
alias gg='google-chrome-stable'
alias sub='/usr/bin/subl'
alias emac='emacs --no-window-system'
alias ne='netctl'
alias ur='urxvt'
alias libre='libreoffice'
alias show='mirage'
alias z='zsh'
alias li='libreoffice'
alias cal='gcalcli'
alias mi='mirage'
alias fire='firefox'
alias pan='pandoc'
alias r='ranger'
alias vf='vifm'
alias tint='tint2 & disown'
alias x='startx'
alias vbox='virtualbox'
alias fox='firefox'
alias tt='sudo thunar ./'
alias rtt='sudo dolphin4 ./'
alias play='vlc'
alias ag='autokey-gtk'

## vim
alias v='vim'
alias vv='sudo vim'
alias vimnotes='vim -c "colorscheme molokai | Note config"'
alias plugins='vim +PluginInstall +qall'
alias vimshell='vim -c VimShell'

## git
alias com="ga . && gc -m '.'"
alias push='com && gp' 
alias gd='git diff'
alias gl='git log'
alias gs='git status'
alias gc='git commit'
alias gp='git push'
alias ga='git add'
alias gb='git branch'
alias gch='git checkout'
alias glg='git lg'

## vagrant 
alias vu='vagrant up'
alias vs='vagrant ssh'

## databases
alias post='sudo systemctl start postgresql'
alias pg='sudo -u postgres psql postgres'
alias mysqlon='sudo systemctl start mysqld'
alias mysqlr='mysql -u root -p'
alias mysqlri='mysql -u user -p'
alias apache='sudo systemctl start httpd.service'
alias reapache='systemctl restart httpd'

## lan
alias ree='ifdown eth0 && ifup eth0'
alias pp='ping -c 3 www.google.com'
alias net='sudo systemctl start dhcpcd@enp9s0.service'
alias netw='sudo systemctl start dhcpcd@enp2s0.service'

## wifi
alias wpa='wpa_supplicant -Dnl80211 -iwlan0 -c/etc/wpa_supplicant/wpa_supplicant.conf'
alias renet=' service networking restart && /etc/init.d/networking restart'
alias rew='ifdown wlan0 && ifup wlan0'
alias wnet='sudo systemctl start dhcpcd@wlp8s0.service'
alias wifion='sudo ip link set wlp8s0 up'
alias wifiof='sudo ip link set wlp8s0 down'
alias wh='sudo netctl start home'
alias wm='sudo netctl start modem'
alias wpah='sudo wpa_supplicant -B -i wlp8s0 -c /etc/wpa_supplicant/home.conf' 
alias wpam='sudo wpa_supplicant -B -i wlp8s0 -c /etc/wpa_supplicant/modem.conf' 
alias wifih='wifion && wnet && wh && wpah'
alias wifim='wifion && wnet && wm && wpam'

## touchpad
alias ton='synclient TouchpadOff=0'
alias tof='synclient TouchpadOff=1'

## screen setup
alias ek='xrandr --output VGA-1 --auto --output eDP-1-1  --auto left-of VGA-0 --output HDMI-1-1 --auto --left '
alias home='xrandr --output HDMI-1-1 --auto --output eDP-1-1 --auto --right-of HDMI-1-1'
alias xl='xrandr --output VGA-0 --rotate left'
alias xn='xrandr --output VGA-0 --rotate normal' 
alias xport='xrandr --output HDMI-1-1 --auto --rotate left --output eDP-1-1 --auto --right-of HDMI-1-1'
alias xland='xrandr --output HDMI-1-1 --auto --rotate normal --output eDP-1-1 --auto --right-of HDMI-1-1'
alias xexof='xrandr --output HDMI-1-1 --off'
alias xexon='xrandr --output HDMI-1-1 --auto'
alias xof='xrandr --output eDP-1-1 --off'
alias xon='xrandr --output eDP-1-1 --auto'

## c lang
alias ms='make rebuild'
alias vt='vlt ./test'
alias vl='valgrind'
alias vlt='valgrind --track-origins=yes --leak-check=full'
alias vll='vlt --leak-check=full --show-leak-kinds=all ./test'
alias vllv='vlt --leak-check=full --show-leak-kinds=all -v ./test'

## python
alias p='python'
alias pel='python -m pelican.server'
alias condaenv='source /opt/anaconda/bin/activate /opt/anaconda/'
alias venv='source ../env/bin/activate'
alias senv='source env/bin/activate'
alias qenv='deactivate'
alias pu='s pip uninstall'

## django
alias mig='pmp makemigrations && pmp migrate'
alias pmp='python manage.py'
alias cs='python manage.py collectstatic --noinput'
alias runs='python manage.py runserver'

## debian
alias dp='sudo dpkg -i'
alias upg='sudo apt-get upgrade'
alias aptr='sudo apt-get remove'
alias dl='dpkg -l'
alias upp='sudo apt-get update'
alias apt='sudo apt-get install'
alias ureapache='sudo systemctl restart apache2'

## clipboard
alias xclip='xclip -selection clipboard'
alias xclip1='xclip -selection primary'
alias xclip2='xclip -selection secondary'


###################
# TEMPORARY ALIASES
###################

## dag
alias dag.sc='python scanner.py'
alias dag.venv='source ../../../env/bin/activate'

## vagrant grigeo
alias runs='python manage.py runserver 0.0.0.0:8000'
alias gri='cd /vagrant/grigiskes-api/app/'
alias venv='source ../env/bin/activate'
alias senv='source ../scard-env/bin/activate'

## vagrant dienynas
alias di='cd /vagrant/dienynas/app/'
alias sca='cd /vagrant/scard-api/'
alias runsg='python manage.py global runserver 0.0.0.0:8000'
alias runsa='python manage.py admin runserver 0.0.0.0:8000'
alias runst='python manage.py teacher runserver 0.0.0.0:8000'

alias cleanify="sed -i 's@<br/>@ @g'" 
alias aa='airflow resetdb && airflow scheduler'


###########
# FUNCTIONS
###########

# MAIN USER FUNCTIONS

## copy argument to clipboard
function kk() { s cp -r "$1" $MAIN_HOME/backups/"$1".bak;} 

## make cmd aliases
function ma() { echo alias $1="'$2'" >> $MAIN_HOME/.aliases; zsh; }


# SYSTEMWIDE FUNCTIONS

## scp argument to server
function toserv() { scp $1 root@tomasgiedraitis.com:/home/riddle; }

## unmount argument volume
function de() { sudo udisks --unmount /dev/$1; }

## unbind cmd from current shell 
function op() { nohup $1 & disown;}

## combine cd & ls
function cdd() { cd $1; ls;}

## find command in history
function his() { history | grep $1; }

## copy argument to clipboard
function copy() { echo "$@" | xclip -selection clipboard;}


##################
# STARTUP COMMANDS
##################

FREETYPE_PROPERTIES='truetype:interpreter-version=35'

## Configure display
xrandr --output HDMI-1-1 --auto 

## If not running interactively, don't do anything
[[ $- != *i* ]] && return

if [ -f $MAIN_HOME/.dircolors ]; then
    eval $(dircolors $MAIN_HOME/.dircolors)
fi

## check if X is running
if xset q &>/dev/null; then
    ## launch tmux
    tmux > /dev/null 2>&1

    ## launch autokey (if not running)
    ps cax | grep autokey > /dev/null 2>&1 
    if [ $? -eq 0 ]; then
        :
    else
        $SHELL_SCRIPTS_DIR/autokey.sh
    fi;

    ## remap keys with setxkbmap (if installed)
    if type setxkbmap >/dev/null 2>&1; then
        setxkbmap -option grp:setxkbmap -option grp:alt_shift_toggle us,lt  2>/dev/null 
        setxkbmap -option caps:escape 2>/dev/null
    fi

    ## change wallpaper (if exists)
    feh  --bg-scale '$MAIN_HOME/Dropbox/sync/candy/wallpapers/black_arch_2.jpg'

    ## launch xscreensaver (if installed && not running)
    xscreensaver > /dev/null 2>&1 &

    ## launch conky scripts (if installed && exist)
    ps cax | grep conky > /dev/null 2>&1
    if [ $? -eq 0 ]; then
        :
    else
        conky -c $DOTFILES_DIR/xorg/.conky/clock_blue > /dev/null 2>&1 &
        conky -c $DOTFILES_DIR/xorg/.conky/stats_blue > /dev/null 2>&1 &
    fi

else
    if [ $TTY = "/dev/tty1"  ]; then 
        ## if tty1, startx
        startx
    else
        ## remap Caps Lock to escape (in command line environment (without X))
        sudo echo "keycode 58 = Escape" | sudo loadkeys
    fi
fi

## launch dropbox (if installed && not running)
ps cax | grep dropbox > /dev/null
if [ $? -eq 0 ]; then
  :
else
    /usr/bin/dropbox & 
fi

## avoid Ctrl-s freezing the terminal
stty -ixon

## Vi keybindings in terminal
set -o vi

## Launch 'Archey' (if installed). Otherwise launch 'Screenfetch' (if installed)
if ! type "archey3" > /dev/null; then
    if ! type "screenfetch" > /dev/null; then
	:
    else
	screenfetch
    fi
else
    archey3
fi

